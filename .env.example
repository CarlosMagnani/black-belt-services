# ============================================
# Black Belt Services - Environment Variables
# ============================================
# Copiar para .env e preencher com valores reais

# ============================================
# Server Configuration
# ============================================
PORT=8080
ENV=development  # development | staging | production

# ============================================
# Database (PostgreSQL)
# ============================================
# Local (via Docker Compose):
DATABASE_URL=postgresql://dojoflow:dev_password@localhost:5432/dojoflow_dev?sslmode=disable

# Production (exemplo):
# DATABASE_URL=postgresql://user:pass@db.example.com:5432/dojoflow_prod?sslmode=require

DATABASE_MAX_CONNECTIONS=25
DATABASE_IDLE_CONNECTIONS=5
DATABASE_MAX_LIFETIME=300  # seconds

# ============================================
# Redis (Cache & Idempotency)
# ============================================
REDIS_URL=redis://localhost:6379/0

# Redis com senha (produção):
# REDIS_URL=redis://:password@localhost:6379/0

REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=10

# ============================================
# Stripe Configuration
# ============================================
# IMPORTANTE: Nunca commitar keys reais!
# Test keys (começam com sk_test_):
STRIPE_SECRET_KEY=sk_test_51ABC...xyz

# Live keys (começam com sk_live_):
# STRIPE_SECRET_KEY=sk_live_51ABC...xyz

# Webhook signing secret (obtido via Stripe CLI ou Dashboard):
STRIPE_WEBHOOK_SECRET=whsec_abc123...

# API Version (fixar versão para estabilidade):
STRIPE_API_VERSION=2024-11-20.acacia

# ============================================
# Security
# ============================================
# JWT Secret (gerar com: openssl rand -base64 32)
JWT_SECRET=CHANGE_THIS_TO_RANDOM_STRING_IN_PRODUCTION

# JWT expiration (em horas)
JWT_EXPIRATION_HOURS=24

# API Rate Limiting (requests por minuto)
API_RATE_LIMIT=100

# CORS Allowed Origins (separado por vírgula)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://app.dojoflow.com

# ============================================
# Logging
# ============================================
# Níveis: debug | info | warn | error
LOG_LEVEL=debug

# Formato: console | json
LOG_FORMAT=console  # Use 'json' em produção

# ============================================
# Application Settings
# ============================================
# URL base da aplicação (para gerar links)
APP_URL=http://localhost:3000

# Platform fee (% da transação que fica com a plataforma)
PLATFORM_FEE_PERCENTAGE=15

# Timezone
TZ=America/Sao_Paulo

# ============================================
# External Services (Opcional)
# ============================================
# Sentry (error tracking)
# SENTRY_DSN=https://...@sentry.io/...

# SendGrid (emails)
# SENDGRID_API_KEY=SG...
# SENDGRID_FROM_EMAIL=noreply@dojoflow.com

# AWS S3 (uploads)
# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=...
# AWS_S3_BUCKET=dojoflow-uploads
# AWS_REGION=us-east-1

# ============================================
# Monitoring (Opcional)
# ============================================
# Prometheus metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# OpenTelemetry tracing
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_SERVICE_NAME=black-belt-services

# ============================================
# Background Jobs (Futuro)
# ============================================
# WORKER_CONCURRENCY=5
# RECONCILIATION_CRON=0 2 * * *  # 2am diariamente
